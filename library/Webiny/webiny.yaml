###############################################################################
# This is main config file for Webiny framework.
# DO NOT edit this file!
#
# If you wish to edit the config, please use 'my_config.yaml' file.
###############################################################################

system:
    display_errors: true
    cache: false
        #wfc:
        #    driver: '\Webiny\Component\Cache\Drivers\Couchbase::getInstance'
        #    params:
        #        user: 'webiny'
        #        pass: ''
        #        bucket: 'default'
        #        host: '127.0.0.1:8091'
    environment: 'development'
bridges:
    cache: false
        #apc: '\Webiny\Bridge\Cache\Memory\APC'
        #couchbase: '\Webiny\Bridge\Cache\Memory\Couchbase'
        #memcache: '\Webiny\Bridge\Cache\Memory\Memcache'
        #redis: '\Webiny\Bridge\Cache\Memory\Redis'
    yaml: 'Spyc\Spyc'
    crypt: '\Webiny\Bridge\Crypt\CryptLib\CryptLib'
additional_libraries:
    'Jamm\Memory': '../Memory'
    'Spyc\Spyc': '../Spyc'
    'Psr': '../Psr'
    'CryptLib': '../PHP-CryptLib/lib/CryptLib'
components:
    logger:
        formatters:
            default:
                date_format: 'Y-m-d H:i:s'
            file:
                record_format: '%datetime% [%name%] [%level%]: %message%\nContext: %context%\nExtra: %extra%\n\n'
            webiny_tray:
                method: new_notification
                date_format: 'Y-m-d H:i:s'
        handlers:
            udp:
                host: 192.168.1.10:41234
        tray: 192.168.1.10:5000
    crypt:
        password_algo: 'Blowfish'
        cipher_mode: 'CCM'
        cipher_block: 'rijndael-128'
        cipher_initialization_vector: '_FOO_VECTOR'
    http:
        session:
            storage:
                driver: '\Webiny\Component\Http\Request\Session\Storage\CacheStorage'
                params:
                    cache_id: 'wfc'
            prefix: 'wfs_'
            expiretime: 86400
        trusted_proxies: ['192.168.1.9', '192.168.1.128', '127.0.0.1']
        trusted_headers:
            client_ip: 'X_FORWARDED_FOR'
            client_host: 'X_FORWARDED_HOST'
            client_proto: 'X_FORWARDED_PROTO'
            client_port: 'X_FORWARDED_PORT'
        cookie:
            storage:
                driver: '\Webiny\Component\Http\Request\Cookie\Storage\Native'
            prefix: 'wfc_'
            http_only: 'true'
            expiretime: 86400
security:
    firewall:
        administration:
            realm_name: 'My administration realm'
            url_pattern: '^/'
            anonymous: true
            remember_me: true
            authorization:
                login_form_url: '^/login'
                login_service_provider: 'Webiny\Component\Security\HTTPAuth'
            logout:
                path: '/logout'
                target: '/'
            encoder:
                driver: '\Webiny\Component\Security\Encoder\Drivers\Crypt'
                salt: 'I_WANT_TO_KEEP_THIS_A_SECRET'
            providers:
                #session:
                #   driver: '\Webiny\Component\Security\UserProviders\Session'
                #   params:
                memory:
                    sven: {password: delmania, roles: 'ROLE_USER'}
                    admin: {password: admin, roles: 'ROLE_ADMIN'}
            #provider_chain: ['session', 'memory']
            role_hierarchy:
                ROLE_ADMIN: ROLE_USER
                ROLE_SUPERADMIN: [ROLE_ADMIN, ROLE_CUSTOM]
            access_control:
                - {path: ^/admin, roles: ROLE_ADMIN}
                - {path: ^/login}
parameters:
    logger.class: "\Webiny\Component\Logger\Logger"
    logger.driver.class: "\Webiny\Component\Logger\Drivers\Webiny"

services:
    logger:
        drivers:
            Webiny:
                class: %logger.driver.class%
                arguments: []
        handlers:
            UDPTray:
                class: "\Webiny\Component\Logger\Drivers\Webiny\Handlers\UDPHandler"
                arguments: [[], true, true]
                calls:
                    - [setFormatter, [@logger.formatters.Tray]]
        formatters:
            Tray:
                class: "\Webiny\Component\Logger\Drivers\Webiny\Formatters\WebinyTrayFormatter"
        TrayLoggerAbstract:
            abstract: true
            class: "%logger.class%"
            calls:
              - [addHandler, [@logger.handlers.UDPTray]]
        WebinySystem:
            parent: @logger.TrayLoggerAbstract
            arguments: ["System", %logger.driver.class%]
        WebinyEcommerce:
            parent: logger.TrayLoggerAbstract
            arguments: ["Ecommerce", "%logger.driver.class%"]